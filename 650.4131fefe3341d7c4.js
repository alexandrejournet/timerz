"use strict";(self.webpackChunkTimerzz=self.webpackChunkTimerzz||[]).push([[650],{6650:(k,p,r)=>{r.r(p),r.d(p,{SessionComponent:()=>Z});var u=r(5861),_=r(8492),d=r(3868),c=r(6895),a=r(801),f=r(8150),l=r(6477),n=r(1571),m=r(9623);let h=(()=>{class e{constructor(t){this.activeModal=t}stopSession(){this.activeModal.close("stop")}keepGoingOn(){this.activeModal.close("keep")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(m.Kz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-dialog-stop-session"]],standalone:!0,features:[n.jDz],decls:11,vars:0,consts:[[1,"modal-header"],[1,"modal-title"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer","flex-row","justify-content-evenly","align-items-center"],[1,"btn-valid",3,"click"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"h4",1),n._uU(2,"Abandon"),n.qZA(),n.TgZ(3,"button",2),n.NdJ("click",function(){return i.activeModal.dismiss("Cross click")}),n.qZA()(),n.TgZ(4,"div",3),n._uU(5," Voulez-vous arr\xeater votre s\xe9ance ?\n"),n.qZA(),n.TgZ(6,"div",4)(7,"div",5),n.NdJ("click",function(){return i.stopSession()}),n._uU(8,"Abandonner"),n.qZA(),n.TgZ(9,"div",5),n.NdJ("click",function(){return i.keepGoingOn()}),n._uU(10,"Continuer"),n.qZA()())},dependencies:[c.ez],styles:["[_nghost-%COMP%]{height:30vh}[_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]{bottom:0;position:absolute;width:100%;background:ghostwhite}[_nghost-%COMP%]   .btn-valid[_ngcontent-%COMP%]{padding:10px;cursor:pointer;z-index:3}[_nghost-%COMP%]   .btn-valid[_ngcontent-%COMP%]:active{transform:scale(.9)}"]}),e})();var x=r(7119);function v(e,s){1&e&&(n.ynx(0),n.TgZ(1,"span",10),n._uU(2,"Appuyez sur play pour commencer !"),n.qZA(),n.BQk())}function C(e,s){if(1&e&&n._UZ(0,"app-circle-progress",12),2&e){const t=n.oxw(3);n.Q6J("progress",t.currentTime)("blink",t.isStarted&&!t.isPlaying)("timer",t.currentTimer)}}function T(e,s){if(1&e&&n.YNc(0,C,1,3,"app-circle-progress",11),2&e){const t=n.oxw(2);n.Q6J("ngIf",t.currentTimer)}}function O(e,s){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",5),n.YNc(2,v,3,0,"ng-container",1),n.YNc(3,T,1,1,"ng-template",null,6,n.W1O),n.qZA(),n.TgZ(5,"div",7)(6,"fa-icon",8),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.playPauseCountdown())}),n.qZA(),n.TgZ(7,"fa-icon",9),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.openModalStop())}),n.qZA()(),n.BQk()}if(2&e){const t=n.MAs(4),i=n.oxw();n.xp6(2),n.Q6J("ngIf",!i.isStarted)("ngIfElse",t),n.xp6(4),n.Q6J("icon",i.playPauseBtn()),n.xp6(1),n.Q6J("icon",i.stopBtn)}}function M(e,s){if(1&e){const t=n.EpF();n._UZ(0,"div",13),n.TgZ(1,"div",5)(2,"span",10),n._uU(3,"Bien jou\xe9 !"),n.qZA()(),n.TgZ(4,"div",7)(5,"div",14),n.NdJ("click",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.goToRecap())}),n._uU(6,"R\xe9capitulatif de la s\xe9ance"),n.qZA()()}}function P(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"div",15),n._uU(2),n.qZA(),n.BQk()),2&e){const t=n.oxw();n.xp6(2),n.AsE(" ",t.currentIndex,"/",t.timers.length," ")}}function y(e,s){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t.time," ")}}function b(e,s){if(1&e&&n._UZ(0,"fa-icon",19),2&e){const t=n.oxw(3);n.Q6J("icon",t.faTick)}}function S(e,s){if(1&e&&(n.TgZ(0,"div",17),n.YNc(1,y,2,1,"ng-container",1),n.YNc(2,b,1,1,"ng-template",null,18,n.W1O),n.qZA()),2&e){const t=s.index,i=n.MAs(3),o=n.oxw(2);n.Q6J("ngClass",t===o.currentIndex?"yellow":t>o.currentIndex?"blue":"green"),n.xp6(1),n.Q6J("ngIf",t>=o.currentIndex)("ngIfElse",i)}}function I(e,s){if(1&e&&(n.ynx(0),n.YNc(1,S,4,3,"div",16),n.BQk()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",t.timers)}}let Z=(()=>{class e extends _.I{constructor(t,i,o){super(),this.timerService=t,this.router=i,this.modalService=o,this.stopBtn=a.Bg$,this.faTick=a.LEp,this.isStarted=!1,this.isPlaying=!1,this.isOver=!1,this.timers=[]}ngOnInit(){this.initTimers(),this.router.events.subscribe(t=>{t instanceof l.m2&&(this.timers=[],this.currentTimer=void 0,this.currentTime=void 0,this.currentIndex=void 0,clearInterval(this.currentInterval),this.currentInterval=void 0)})}initTimers(){this.timers=this.timerService.getSession().timers,this.currentTimer=this.timers[0],this.currentTime=this.currentTimer.time,this.currentIndex=0}playPauseCountdown(){this.isStarted=!0,this.isPlaying?clearInterval(this.currentInterval):this.currentInterval=setInterval(()=>{this.currentTime&&this.currentTime>0?this.currentTime-=.05:this.nextTimer()},50),this.isPlaying=!this.isPlaying}nextTimer(){void 0!==this.currentIndex&&(this.currentIndex++,this.timers&&this.currentIndex<this.timers.length?(navigator.vibrate([100,50,100]),this.currentTimer=this.timers[this.currentIndex],this.currentTime=this.currentTimer.time):(navigator.vibrate([300,50,300]),clearInterval(this.currentInterval),this.isOver=!0))}playPauseBtn(){return this.isPlaying?a.ul5:a.aQp}goToRecap(){var t=this;return(0,u.Z)(function*(){yield t.router.navigate(["recap"])})()}openModalStop(){var t=this;this.isPlaying=!1,this.modalService.open(h,{centered:!0}).result.then(function(){var o=(0,u.Z)(function*(g){g&&"stop"===g&&(yield t.router.navigate(["recap"]))});return function(g){return o.apply(this,arguments)}}())}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(x.f),n.Y36(l.F0),n.Y36(m.FF))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-session"]],standalone:!0,features:[n.qOj,n.jDz],decls:7,vars:4,consts:[[1,"counter"],[4,"ngIf","ngIfElse"],["sessionFinished",""],[4,"ngIf"],[1,"timers"],[1,"progress-countdown"],["sessionStarted",""],[1,"progress-btn"],[1,"play",3,"icon","click"],[1,"stop",3,"icon","click"],[1,"start-message"],[3,"progress","blink","timer",4,"ngIf"],[3,"progress","blink","timer"],[1,"finished"],[1,"recap-btn",3,"click"],[1,"timer-left"],["class","card-timer ms-3 me-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-timer","ms-3","me-3",3,"ngClass"],["done",""],[3,"icon"]],template:function(t,i){if(1&t&&(n.TgZ(0,"div",0),n.YNc(1,O,8,4,"ng-container",1),n.YNc(2,M,7,0,"ng-template",null,2,n.W1O),n.qZA(),n.YNc(4,P,3,2,"ng-container",3),n.TgZ(5,"div",4),n.YNc(6,I,2,1,"ng-container",3),n.qZA()),2&t){const o=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.isOver)("ngIfElse",o),n.xp6(3),n.Q6J("ngIf",void 0!==i.currentIndex&&i.timers),n.xp6(2),n.Q6J("ngIf",void 0!==i.currentIndex&&i.timers)}},dependencies:[c.ez,c.mk,c.sg,c.O5,d.uH,d.BN,f.n],styles:['.finished[_ngcontent-%COMP%]{background:url(conf.084a438235288238.gif) 20%;height:100%;width:100%;position:absolute;top:0}.counter[_ngcontent-%COMP%]{height:70%;width:100%;position:relative;display:flex;flex-direction:column;overflow:hidden}.counter[_ngcontent-%COMP%]   .progress-countdown[_ngcontent-%COMP%]{height:75%;width:100%;background:none;display:flex;justify-content:center;align-items:center;color:gray}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]{height:25%;background:none;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;z-index:1}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{color:gray}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]:active{transform:scale(.9)}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]   fa-icon.play[_ngcontent-%COMP%]{font-size:5em}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]   fa-icon.stop[_ngcontent-%COMP%]{font-size:3em;position:absolute;right:20%}.counter[_ngcontent-%COMP%]:after{content:"";position:absolute;width:200%;height:99%;top:0;left:-50%;border-bottom-left-radius:60%;border-bottom-right-radius:60%;background:ghostwhite;box-shadow:0 0 4px 3px #00000040;z-index:-1;overflow:hidden}.timers[_ngcontent-%COMP%]{height:30%;width:100%;display:flex;flex-direction:row;align-items:center;overflow:scroll;position:relative}.timers[_ngcontent-%COMP%]   .card-timer[_ngcontent-%COMP%]{height:25vw;width:25vw;box-shadow:0 0 4px 3px #00000040;border-radius:5px;flex-shrink:0;display:flex;justify-content:center;align-items:center;font-size:20pt}.timers[_ngcontent-%COMP%]   .yellow[_ngcontent-%COMP%]{background:lightyellow}.timers[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background:ghostwhite}.timers[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background:lightgreen}.start-message[_ngcontent-%COMP%]{animation:fa-beat infinite ease-in-out 1.5s}.timer-left[_ngcontent-%COMP%]{position:absolute;top:74%;left:50%;transform:translate(-50%,-50%);font-size:1.2em}.recap-btn[_ngcontent-%COMP%]{padding:10px;border-radius:5px;box-shadow:0 0 4px 3px #00000040;cursor:pointer;z-index:3}.recap-btn[_ngcontent-%COMP%]:active{transform:scale(1.1)}']}),e})()}}]);