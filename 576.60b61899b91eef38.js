"use strict";(self.webpackChunkTimerzz=self.webpackChunkTimerzz||[]).push([[576],{5576:(S,l,o)=>{o.r(l),o.d(l,{SessionComponent:()=>Z});var m=o(5861),u=o(8492),p=o(3868),c=o(6895),a=o(801),n=o(1571);const d=["progressBar"];function f(t,r){if(1&t&&(n.TgZ(0,"span",5),n._uU(1),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.Oqu(e.timer.name)}}function _(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"div",1,2)(3,"span",3),n._uU(4),n.qZA(),n.YNc(5,f,2,1,"span",4),n.qZA(),n.BQk()),2&t){const e=n.oxw();n.xp6(4),n.Oqu(e.progressShown),n.xp6(1),n.Q6J("ngIf",e.timer.name)}}let h=(()=>{class t{ngOnInit(){this.loadData()}ngAfterViewInit(){this.loadData()}loadData(){if(this.progressBar&&this.progress&&this.timer?.time){this.progressShown=Math.round(this.progress);const e=(100*this.progress/this.timer.time).toFixed(2);this.progressBar.nativeElement.style.background=`conic-gradient(#404040 ${e}%, #BABABA ${e}%)`}}ngOnChanges(e){this.loadData()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-circle-progress"]],viewQuery:function(e,i){if(1&e&&n.Gf(d,5),2&e){let s;n.iGM(s=n.CRH())&&(i.progressBar=s.first)}},inputs:{progress:"progress",timer:"timer"},standalone:!0,features:[n.TTD,n.jDz],decls:1,vars:1,consts:[[4,"ngIf"],["id","progress"],["progressBar",""],["id","progress-value"],["id","progress-name",4,"ngIf"],["id","progress-name"]],template:function(e,i){1&e&&n.YNc(0,_,6,2,"ng-container",0),2&e&&n.Q6J("ngIf",i.progress&&i.timer)},dependencies:[c.ez,c.O5],styles:["#progress[_ngcontent-%COMP%]{height:75vw;width:75vw;border-radius:50%;display:grid;place-items:center;float:left;margin-top:3px;transition:all 1s}#progress-value[_ngcontent-%COMP%]{height:calc(100% - 30px);width:calc(100% - 30px);background-color:#f8f8ff;color:#000;border-radius:50%;display:grid;place-items:center;font-weight:600;font-size:4rem;transition:all 1s}#progress-name[_ngcontent-%COMP%]{position:absolute;top:52%;left:50%;transform:translate(-50%,-50%);text-align:center;width:45%;height:10%;overflow-wrap:break-word;color:gray}"]}),t})();var g=o(6477),x=o(7119);function C(t,r){1&t&&(n.ynx(0),n.TgZ(1,"span",10),n._uU(2,"Appuyez sur play pour commencer !"),n.qZA(),n.BQk())}function v(t,r){if(1&t&&n._UZ(0,"app-circle-progress",12),2&t){const e=n.oxw(3);n.Q6J("progress",e.currentTime)("timer",e.currentTimer)}}function T(t,r){if(1&t&&n.YNc(0,v,1,2,"app-circle-progress",11),2&t){const e=n.oxw(2);n.Q6J("ngIf",e.currentTimer)}}function O(t,r){if(1&t){const e=n.EpF();n.ynx(0),n.TgZ(1,"div",5),n.YNc(2,C,3,0,"ng-container",1),n.YNc(3,T,1,1,"ng-template",null,6,n.W1O),n.qZA(),n.TgZ(5,"div",7)(6,"fa-icon",8),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.playPauseCountdown())}),n.qZA(),n._UZ(7,"fa-icon",9),n.qZA(),n.BQk()}if(2&t){const e=n.MAs(4),i=n.oxw();n.xp6(2),n.Q6J("ngIf",!i.isStarted)("ngIfElse",e),n.xp6(4),n.Q6J("icon",i.playPauseBtn()),n.xp6(1),n.Q6J("icon",i.stopBtn)}}function y(t,r){if(1&t){const e=n.EpF();n._UZ(0,"div",13),n.TgZ(1,"div",5)(2,"span",10),n._uU(3,"Bien jou\xe9 !"),n.qZA()(),n.TgZ(4,"div",7)(5,"div",14),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.goToRecap())}),n._uU(6,"R\xe9capitulatif de la s\xe9ance"),n.qZA()()}}function P(t,r){if(1&t&&(n.ynx(0),n.TgZ(1,"div",15),n._uU(2),n.qZA(),n.BQk()),2&t){const e=n.oxw();n.xp6(2),n.AsE(" ",e.currentIndex,"/",e.timers.length," ")}}function w(t,r){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",e.time," ")}}function I(t,r){if(1&t&&n._UZ(0,"fa-icon",19),2&t){const e=n.oxw(3);n.Q6J("icon",e.faTick)}}function M(t,r){if(1&t&&(n.TgZ(0,"div",17),n.YNc(1,w,2,1,"ng-container",1),n.YNc(2,I,1,1,"ng-template",null,18,n.W1O),n.qZA()),2&t){const e=r.index,i=n.MAs(3),s=n.oxw(2);n.Q6J("ngClass",e===s.currentIndex?"yellow":e>s.currentIndex?"blue":"green"),n.xp6(1),n.Q6J("ngIf",e>=s.currentIndex)("ngIfElse",i)}}function b(t,r){if(1&t&&(n.ynx(0),n.YNc(1,M,4,3,"div",16),n.BQk()),2&t){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.timers)}}let Z=(()=>{class t extends u.I{constructor(e,i){super(),this.timerService=e,this.router=i,this.stopBtn=a.Bg$,this.faTick=a.LEp,this.isStarted=!1,this.isPlaying=!1,this.isOver=!1,this.timers=[]}ngOnInit(){this.initTimers(),this.router.events.subscribe(e=>{e instanceof g.m2&&(this.timers=[],this.currentTimer=void 0,this.currentTime=void 0,this.currentIndex=void 0,clearInterval(this.currentInterval),this.currentInterval=void 0)})}initTimers(){this.timers=this.timerService.session.timers,this.currentTimer=this.timers[0],this.currentTime=this.currentTimer.time,this.currentIndex=0}playPauseCountdown(){this.isStarted=!0,this.isPlaying?clearInterval(this.currentInterval):this.currentInterval=setInterval(()=>{this.currentTime&&this.currentTime>0?this.currentTime-=.05:this.nextTimer()},50),this.isPlaying=!this.isPlaying}nextTimer(){void 0!==this.currentIndex&&(this.currentIndex++,this.timers&&this.currentIndex<this.timers.length?(navigator.vibrate([100,50,100]),this.currentTimer=this.timers[this.currentIndex],this.currentTime=this.currentTimer.time):(navigator.vibrate([300,50,300]),clearInterval(this.currentInterval),this.isOver=!0))}playPauseBtn(){return this.isPlaying?a.ul5:a.aQp}goToRecap(){var e=this;return(0,m.Z)(function*(){yield e.router.navigate(["recap"])})()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(x.f),n.Y36(g.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-session"]],standalone:!0,features:[n.qOj,n.jDz],decls:7,vars:4,consts:[[1,"counter"],[4,"ngIf","ngIfElse"],["sessionFinished",""],[4,"ngIf"],[1,"timers"],[1,"progress-countdown"],["sessionStarted",""],[1,"progress-btn"],[1,"play",3,"icon","click"],[1,"stop",3,"icon"],[1,"start-message"],[3,"progress","timer",4,"ngIf"],[3,"progress","timer"],[1,"finished"],[1,"recap-btn",3,"click"],[1,"timer-left"],["class","card-timer ms-3 me-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-timer","ms-3","me-3",3,"ngClass"],["done",""],[3,"icon"]],template:function(e,i){if(1&e&&(n.TgZ(0,"div",0),n.YNc(1,O,8,4,"ng-container",1),n.YNc(2,y,7,0,"ng-template",null,2,n.W1O),n.qZA(),n.YNc(4,P,3,2,"ng-container",3),n.TgZ(5,"div",4),n.YNc(6,b,2,1,"ng-container",3),n.qZA()),2&e){const s=n.MAs(3);n.xp6(1),n.Q6J("ngIf",!i.isOver)("ngIfElse",s),n.xp6(3),n.Q6J("ngIf",void 0!==i.currentIndex&&i.timers),n.xp6(2),n.Q6J("ngIf",void 0!==i.currentIndex&&i.timers)}},dependencies:[c.ez,c.mk,c.sg,c.O5,p.uH,p.BN,h],styles:['.finished[_ngcontent-%COMP%]{background:url(conf.084a438235288238.gif) 20%;height:100%;width:100%;position:absolute;top:0}.counter[_ngcontent-%COMP%]{height:70%;width:100%;position:relative;display:flex;flex-direction:column;overflow:hidden}.counter[_ngcontent-%COMP%]   .progress-countdown[_ngcontent-%COMP%]{height:75%;width:100%;background:none;display:flex;justify-content:center;align-items:center;color:gray}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]{height:25%;background:none;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center;z-index:1}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{color:gray}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]   fa-icon.play[_ngcontent-%COMP%]{font-size:52pt}.counter[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]   fa-icon.stop[_ngcontent-%COMP%]{font-size:22pt;position:absolute;right:25%}.counter[_ngcontent-%COMP%]:after{content:"";position:absolute;width:200%;height:99%;top:0;left:-50%;border-bottom-left-radius:60%;border-bottom-right-radius:60%;background:ghostwhite;box-shadow:0 0 4px 3px #00000040;z-index:-1;overflow:hidden}.timers[_ngcontent-%COMP%]{height:30%;width:100%;display:flex;flex-direction:row;align-items:center;overflow:scroll;position:relative}.timers[_ngcontent-%COMP%]   .card-timer[_ngcontent-%COMP%]{height:25vw;width:25vw;box-shadow:0 0 4px 3px #00000040;border-radius:5px;flex-shrink:0;display:flex;justify-content:center;align-items:center;font-size:20pt}.timers[_ngcontent-%COMP%]   .yellow[_ngcontent-%COMP%]{background:lightyellow}.timers[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background:ghostwhite}.timers[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background:lightgreen}.start-message[_ngcontent-%COMP%]{animation:fa-beat infinite ease-in-out 1.5s}.timer-left[_ngcontent-%COMP%]{position:absolute;top:74%;left:50%;transform:translate(-50%,-50%);font-size:1.2em}.recap-btn[_ngcontent-%COMP%]{padding:10px;border-radius:5px;box-shadow:0 0 4px 3px #00000040;cursor:pointer;z-index:3}.recap-btn[_ngcontent-%COMP%]:active{transform:scale(1.1)}']}),t})()}}]);